<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
	<div th:fragment="summaryContent">
		<div class="pd-tab-content" id="summary-content"
			style="display: none;">

			<!-- ===== METRICS TOP ===== -->
			<div class="summary-metrics">
				<div class="metric-card">
					<div class="metric-icon">
						<i class="fas fa-check"></i>
					</div>
					<div class="metric-content">
						<div class="metric-value" th:text="${summary.metrics.completed}">0</div>
						<div class="metric-label">completed</div>
					</div>
				</div>

				<div class="metric-card">
					<div class="metric-icon">
						<i class="fas fa-edit"></i>
					</div>
					<div class="metric-content">
						<div class="metric-value"
							th:text="${summary.metrics.updatedToday}">0</div>
						<div class="metric-label">updated today</div>
					</div>
				</div>

				<div class="metric-card">
					<div class="metric-icon">
						<i class="fas fa-plus-square"></i>
					</div>
					<div class="metric-content">
						<div class="metric-value"
							th:text="${summary.metrics.createdToday}">0</div>
						<div class="metric-label">created today</div>
					</div>
				</div>

				<div class="metric-card">
					<div class="metric-icon">
						<i class="fas fa-calendar"></i>
					</div>
					<div class="metric-content">
						<div class="metric-value" th:text="${summary.metrics.dueSoon}">0</div>
						<div class="metric-label">due soon</div>
					</div>
				</div>
			</div>

			<!-- ===== SUMMARY GRID ===== -->
			<div class="summary-grid">

				<!-- LEFT -->
				<div class="summary-left">

					<!-- ===== STATUS OVERVIEW ===== -->
					<div class="summary-card">
						<div class="summary-card-header">
							<h3>Status overview</h3>
							<p>Get a snapshot of your project's work items.</p>
						</div>

						<div class="summary-card-content status-overview">
							<div class="donut-chart">
								<div class="donut-center">
									<div class="donut-total" th:text="${summary.metrics.total}">0</div>
									<div class="donut-label">Total work items</div>
								</div>
							</div>

							<div class="donut-legend">
								<div class="legend-item" th:each="s : ${summary.statusCounts}"
									th:with="lb=${#strings.toLowerCase(s.label)}">

									<div class="legend-color"
										th:classappend="${
                        lb == 'to do' or lb == 'todo' ? ' lc-todo' :
                        lb == 'in progress' or lb == 'in_progress' ? ' lc-inprogress' :
                        lb == 'review' ? ' lc-review' :
                        lb == 'done' ? ' lc-done' : ' lc-other'
                     }">
									</div>

									<span th:text="${s.label + ': ' + s.count}"></span>
								</div>

								<div
									th:if="${summary.statusCounts == null || summary.statusCounts.isEmpty()}"
									class="legend-empty">No tasks yet</div>
							</div>
						</div>
					</div>

					<!-- ===== PRIORITY BREAKDOWN (SIMPLE LIST) ===== -->
					<div class="summary-card">
						<div class="summary-card-header">
							<h3>Priority breakdown</h3>
							<p>Your team's current focus</p>
						</div>

						<div class="summary-card-content">
							<div class="priority-list"
								th:if="${summary.priorityCounts != null and !summary.priorityCounts.isEmpty()}">

								<div class="priority-row"
									th:each="p : ${summary.priorityCounts}"
									th:with="lb=${#strings.toLowerCase(p.label)}">

									<div class="priority-left">
										<span class="priority-dot"
											th:classappend="${
                           lb == 'high' ? ' priority-high' :
                           lb == 'medium' ? ' priority-medium' :
                           lb == 'low' ? ' priority-low' : ' priority-other'
                        }"></span>

										<span class="priority-name" th:text="${p.label}">High</span>
									</div>

									<div class="priority-count" th:text="${p.count}">0</div>
								</div>
							</div>

							<div class="empty-box"
								th:if="${summary.priorityCounts == null || summary.priorityCounts.isEmpty()}">
								No priority data</div>
						</div>
					</div>

				</div>

				<!-- RIGHT -->
				<div class="summary-right">

					<!-- ===== RECENT ACTIVITY ===== -->
					<div class="summary-card">
						<div class="summary-card-header">
							<h3>Recent activity</h3>
							<p>Stay up to date with your project.</p>
						</div>

						<div class="summary-card-content">
							<div class="activity-list">

								<div class="activity-item"
									th:each="a : ${summary.recentActivities}">
									<div class="activity-avatar">
										<div class="activity-avatar-circle"
											th:text="${a.actor != null ? #strings.substring(a.actor,0,1) : 'U'}">U</div>
									</div>

									<div class="activity-content">
										<div class="activity-user"
											th:text="${a.actor != null ? a.actor : 'Someone'}">User</div>
										<div class="activity-action" th:text="${a.action}">created</div>

										<div class="activity-item-title"
											th:text="${'TASK-' + a.taskId + ': ' + a.title}">
											TASK-1: Title</div>

										<div class="activity-meta">
											<span class="activity-status-pill" th:text="${a.status}">TO
												DO</span> <span class="activity-time"
												th:text="${#temporals.format(a.time, 'HH:mm dd/MM/yyyy')}">
												10:00 01/01/2025 </span>
										</div>
									</div>
								</div>

								<div class="empty-box"
									th:if="${summary.recentActivities == null || summary.recentActivities.isEmpty()}">
									No recent activity</div>

							</div>
						</div>
					</div>

					<!-- ===== TYPES OF WORK ===== -->
					<div class="summary-card">
						<div class="summary-card-header">
							<h3>Types of work</h3>
							<p>Breakdown by task type.</p>
						</div>

						<div class="summary-card-content">
							<div class="work-types-table">

								<div class="work-type-row" th:each="t : ${summary.typeCounts}">
									<div class="work-type-name">
										<i class="fas fa-check-square"></i> <span th:text="${t.label}">Task</span>
									</div>
									<div class="work-type-distribution" th:text="${t.count}">0</div>
								</div>

								<div class="empty-box"
									th:if="${summary.typeCounts == null || summary.typeCounts.isEmpty()}">
									No types data</div>

							</div>
						</div>
					</div>

				</div>
			</div>

		</div>
	</div>

	<!-- ===== CSS ===== -->
	<style>
/* ====== SUMMARY LAYOUT ====== */
.summary-metrics {
	display: grid;
	grid-template-columns: repeat(4, minmax(0, 1fr));
	gap: 12px;
	margin: 12px 0 16px;
}

.metric-card {
	display: flex;
	gap: 10px;
	padding: 14px 14px;
	border-radius: 12px;
	background: rgba(255, 255, 255, 0.04);
	border: 1px solid rgba(255, 255, 255, 0.06);
	align-items: center;
}

.metric-icon {
	width: 36px;
	height: 36px;
	border-radius: 10px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(120, 160, 255, 0.12);
	color: #cfd6ff;
	font-size: 15px;
}

.metric-value {
	font-size: 20px;
	font-weight: 700;
}

.metric-label {
	font-size: 12px;
	opacity: .7;
	margin-top: 2px;
}

.summary-grid {
	display: grid;
	grid-template-columns: 1.2fr 0.8fr;
	gap: 14px;
}

.summary-left, .summary-right {
	display: flex;
	flex-direction: column;
	gap: 14px;
}

.summary-card {
	background: rgba(255, 255, 255, 0.03);
	border: 1px solid rgba(255, 255, 255, 0.06);
	border-radius: 14px;
	padding: 14px;
}

.summary-card-header h3 {
	font-size: 15px;
	margin: 0 0 4px 0;
}

.summary-card-header p {
	margin: 0 0 10px 0;
	font-size: 12px;
	opacity: .7;
}

.summary-card-content {
	display: flex;
	gap: 12px;
	align-items: flex-start;
}

/* ====== STATUS OVERVIEW ====== */
.status-overview {
	display: flex;
	gap: 16px;
}

.donut-chart {
	width: 160px;
	height: 160px;
	border-radius: 50%;
	position: relative;
	background: conic-gradient(rgba(0, 82, 204, 0.9) 0deg,
		rgba(0, 82, 204, 0.9) 360deg);
	mask: radial-gradient(circle, transparent 56%, #000 57%);
	-webkit-mask: radial-gradient(circle, transparent 56%, #000 57%);
}

.donut-center {
	position: absolute;
	inset: 0;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
}

.donut-total {
	font-size: 22px;
	font-weight: 800;
}

.donut-label {
	font-size: 12px;
	opacity: .7;
	margin-top: 2px;
}

.donut-legend {
	display: flex;
	flex-direction: column;
	gap: 8px;
	padding-top: 4px;
}

.legend-item {
	display: flex;
	align-items: center;
	gap: 8px;
	font-size: 13px;
}

.legend-color {
	width: 14px;
	height: 14px;
	border-radius: 4px;
}

.legend-color.lc-todo {
	background: #0052cc;
}

.legend-color.lc-inprogress {
	background: #ffd243;
}

.legend-color.lc-review {
	background: #4369ff;
}

.legend-color.lc-done {
	background: #73eb78;
}

.legend-color.lc-other {
	background: #888;
}

.legend-empty {
	font-size: 12px;
	opacity: .6;
	padding-top: 6px;
}

/* ====== PRIORITY (SIMPLE LIST) ====== */
.priority-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
	width: 100%;
}

.priority-row {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 8px 10px;
	background: rgba(255, 255, 255, 0.03);
	border-radius: 10px;
}

.priority-left {
	display: flex;
	align-items: center;
	gap: 8px;
}

.priority-dot {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: #888;
}

.priority-dot.priority-high {
	background: #ff6b6b;
}

.priority-dot.priority-medium {
	background: #ffd243;
}

.priority-dot.priority-low {
	background: #73eb78;
}

.priority-dot.priority-other {
	background: #888;
}

.priority-name {
	font-size: 13px;
	font-weight: 600;
}

.priority-count {
	font-size: 13px;
	opacity: .85;
}

/* ====== RECENT ACTIVITY ====== */
.activity-list {
	display: flex;
	flex-direction: column;
	gap: 10px;
	width: 100%;
}

.activity-item {
	display: flex;
	gap: 10px;
	padding: 10px;
	border-radius: 10px;
	background: rgba(255, 255, 255, 0.03);
}

.activity-avatar-circle {
	width: 34px;
	height: 34px;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(120, 160, 255, 0.16);
	font-weight: 700;
	color: #dfe4ff;
}

.activity-user {
	font-size: 13px;
	font-weight: 700;
}

.activity-action {
	font-size: 12px;
	opacity: .7;
	margin-top: 2px;
}

.activity-item-title {
	font-size: 13px;
	margin-top: 4px;
	font-weight: 600;
}

.activity-meta {
	display: flex;
	gap: 8px;
	align-items: center;
	margin-top: 6px;
	font-size: 11px;
	opacity: .8;
}

.activity-status-pill {
	font-size: 11px;
	padding: 2px 8px;
	border-radius: 999px;
	background: rgba(255, 255, 255, 0.08);
	border: 1px solid rgba(255, 255, 255, 0.08);
}

/* ====== TYPES ====== */
.work-types-table {
	width: 100%;
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.work-type-row {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 8px 10px;
	background: rgba(255, 255, 255, 0.03);
	border-radius: 10px;
}

.work-type-name {
	display: flex;
	align-items: center;
	gap: 8px;
	font-size: 13px;
	font-weight: 600;
}

.work-type-distribution {
	font-size: 13px;
	opacity: .9;
}

/* EMPTY */
.empty-box {
	font-size: 12px;
	opacity: .6;
	padding: 8px 0;
}

/* Responsive */
@media ( max-width : 1100px) {
	.summary-metrics {
		grid-template-columns: repeat(2, 1fr);
	}
	.summary-grid {
		grid-template-columns: 1fr;
	}
}
</style>

</body>
</html>
