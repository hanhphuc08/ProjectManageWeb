<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Tạo dự án</title>
  <link href="/assets/css/styles.css" rel="stylesheet" />
  <link href="/assets/css/user-home.css" rel="stylesheet" />
  <link href="/assets/css/project-create.css" rel="stylesheet" />
</head>
<body class="uh-dark">
<div class="cp-app">
  <header class="uh-topbar">
    <div class="uh-search"><input type="text" placeholder="Search" /></div>
    <div class="uh-actions"><div class="uh-avatar">HP</div></div>
  </header>

  <main class="cp-main container">
    <h1 class="cp-title">Create project</h1>
    <p class="cp-sub">Thiết lập dự án phần mềm mới để quản lý backlog, sprint và issues.</p>

    <!-- Bind tới DTO: ProjectCreateRequest (có field: projectName, typeId, description, startDate, endDate) -->
    <form class="cp-form" th:action="@{/projects}" th:object="${form}" method="post" novalidate>
      <div class="cp-grid">
        <!-- Project name -->
        <div class="cp-field">
          <label for="name">Project name <span style="color:#f66">*</span></label>
          <input id="name" class="cp-input" type="text"
                 th:field="*{projectName}"
                 placeholder="e.g. My Kanban Project" required>
          <small class="cp-hint">Tên có thể đổi bất kỳ lúc nào.</small>
          <small class="cp-error" th:if="${#fields.hasErrors('projectName')}"
                th:errors="*{projectName}"></small>
        </div>

        <!-- Project topic/type (mới) -->
        <div class="cp-field">
          <label for="typeId">Project topic / type</label>
          <select id="typeId" class="cp-input" th:field="*{typeId}">
            <option th:value="${null}">— Select type —</option>
            <!-- 'types' là List<ProjectType> đổ từ controller: typeId, typeCode, typeName -->
            <option th:each="t : ${types}"
                    th:value="${t.typeId}"
                    th:text="${t.typeName + ' (' + t.typeCode + ')'}"></option>
          </select>
          <small class="cp-hint">Chọn chủ đề để hệ thống gợi ý WBS & phân công phù hợp.</small>
          <small class="cp-error" th:if="${#fields.hasErrors('typeId')}"
                th:errors="*{typeId}"></small>
        </div>

        <!-- Description -->
        <div class="cp-field cp-col-span">
          <label for="desc">Description</label>
          <textarea id="desc" class="cp-input" rows="4"
                    th:field="*{description}"
                    placeholder="Mô tả ngắn về dự án..."></textarea>
          <small class="cp-error" th:if="${#fields.hasErrors('description')}"
                th:errors="*{description}"></small>
        </div>

        <!-- Dates -->
        <div class="cp-field">
          <label for="start">Start date</label>
          <input id="start" class="cp-input" type="date" th:field="*{startDate}">
          <small class="cp-error" th:if="${#fields.hasErrors('startDate')}"
                th:errors="*{startDate}"></small>
        </div>

        <div class="cp-field">
          <label for="end">End date</label>
          <input id="end" class="cp-input" type="date" th:field="*{endDate}">
          <small class="cp-error" th:if="${#fields.hasErrors('endDate')}"
                th:errors="*{endDate}"></small>
        </div>
      </div>

      <div class="cp-actions">
        <a class="uh-btn uh-btn-tertiary" th:href="@{/user/home}">Cancel</a>
        <button type="submit" class="uh-btn uh-btn-primary">Create</button>
      </div>
    </form>
  </main>
</div>
</body>
</html>
