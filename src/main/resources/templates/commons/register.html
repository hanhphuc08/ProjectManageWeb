<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Đăng ký</title>
    <link href="/assets/css/styles.css" rel="stylesheet" />
    <link href="/assets/css/auth.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
<div class="auth-wrapper auth-register">
    <div class="auth-card">
        <div class="auth-logo">
            <img src="/images/navbar-logo.svg" alt="Logo"/>
        </div>
        <div class="auth-title">Tạo tài khoản mới</div>

			<script th:if="${error}" th:inline="javascript">
	      Swal.fire({
	        icon: 'error',
	        title: 'Không thể đăng ký',
	        text: /*[[${error}]]*/ ''      // giờ mới thực sự ra string lỗi
	      });
	    </script>
	
				<!-- (2) Nhiều lỗi field-level: ta truyền 'errors' = List<String> -->
				<script th:if="${errors}" th:inline="javascript">
	      const errs = /*[[${errors}]]*/ []; // Thymeleaf xuất JSON array
	      Swal.fire({
	        icon: 'error',
	        title: 'Vui lòng kiểm tra lại',
	        html: errs.map(e => `<div style="text-align:left">• ${e}</div>`).join('')
	      });
	    </script>

			<form th:action="@{/register}" method="post" th:object="${form}">
            <div class="mb-3">
                <label for="fullName" class="form-label">Họ và tên<span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="fullName"
                 	th:field="*{fullName}" placeholder="Nhập họ và tên" required>
                 	<small class="text-danger" th:if="${#fields.hasErrors('fullName')}" th:errors="*{fullName}"></small>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email<span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="email" th:field="*{email}" placeholder="Nhập email của bạn" required>
					<small class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></small>            
            </div>
				<div class="mb-3">
					<label for="password" class="form-label">Mật khẩu<span
						class="text-danger">*</span></label>
					<input type="password"
						class="form-control" id="password" th:field="*{password}"
						placeholder="Nhập mật khẩu" required autocomplete="new-password">
					<small class="text-danger" th:if="${#fields.hasErrors('password')}"
						th:errors="*{password}"></small>
				</div>

				<div class="mb-3">
					<label for="confirmPassword" class="form-label">Nhập lại
						mật khẩu<span class="text-danger">*</span>
					</label> <input type="password" class="form-control" id="confirmPassword"
						th:field="*{confirmPassword}" placeholder="Nhập lại mật khẩu"
						required autocomplete="new-password">
						<small
						class="text-danger"
						th:if="${#fields.hasErrors('confirmPassword')}"
						th:errors="*{confirmPassword}"></small>
				</div>
				
				<button type="submit" class="btn btn-primary btn-auth-primary">Đăng ký</button>
        </form>
        <div class="auth-foot">
            Đã có tài khoản? <a href="/login">Đăng nhập</a>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
